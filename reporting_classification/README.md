# Filtering of symptom-containing tweets
The aim of this folder is to provide scripts that help filter Twitter self-reports containing symptom mentions. Two of the three main scripts, namely [`run_finetune_multinomial.py`](https://github.com/digitalepidemiologylab/content_changes_paper/blob/main/reporting_classification/run_finetune_multinomial.py) and [`run_predict_multinomial.py`](https://github.com/digitalepidemiologylab/content_changes_paper/blob/main/reporting_classification/run_predict_multinomial.py), implement the BERT-based model developed by [Valdes et al.](https://aclanthology.org/2021.smm4h-1.10) for a three-way classification problem where symptom-containing tweets are treated as self-reports, non-personal reports, or literature/news mentions (note that (i) the input data (stored in [`data/data_for_preprocessing`](https://github.com/digitalepidemiologylab/content_changes_paper/tree/main/reporting_classification/data/data_for_preprocessing)) must be preprocessed before using the two aforementioned scripts; *cf.* scripts in the [folder `preprocess`](https://github.com/digitalepidemiologylab/content_changes_paper/tree/main/reporting_classification/preprocess); (ii) the finetuned model should be stored under [`data/finetune_multinomial/runs/run_id`](https://github.com/digitalepidemiologylab/content_changes_paper/tree/main/reporting_classification/data/finetune_multinomial/runs/run_id) and the predictions generated by the finetuned model will be saved to [`data/predict_data`](https://github.com/digitalepidemiologylab/content_changes_paper/tree/main/reporting_classification/data/predict_data)). 
The third main script, [`filtering_selfreports.py`](https://github.com/digitalepidemiologylab/content_changes_paper/blob/main/reporting_classification/filtering_selfreports.py), filters tweets such that their predicted probability for the "self-reports" class is higher than 90% (output data will be saved to [`data_after_postprocessing/predictions`](https://github.com/digitalepidemiologylab/content_changes_paper/tree/main/reporting_classification/data/data_after_postprocessing/predictions)).
